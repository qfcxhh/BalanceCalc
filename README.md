# CardSplit - 饭卡分账助手

一个简单的共享饭卡余额计算工具，适用于室友或同事间的饭卡分账场景。

## 功能特点

- 💰 计算共享饭卡中个人余额
- 🔄 基于历史数据快速计算
- 📊 显示详细计算步骤
- 💾 SQLite数据库自动保存
- 📱 响应式移动端适配
- 🗂️ 交易历史记录
- 🗑️ 数据管理功能

## 使用场景

适用于以下情况：
- 与室友或同事共用一张饭卡
- 需要分别计算每个人在卡内的余额
- 记录个人充值和消费情况

## 安装运行

### 环境要求

- Python 3.7+
- pip

### 安装步骤

1. 下载项目文件
2. 安装依赖：
```bash
pip install -r requirements.txt
```

3. 启动应用：
```bash
python main.py
```

或者直接运行：
```bash
start.bat
```

4. 打开浏览器访问：http://localhost:8001

## 使用方法

### 首次使用
1. 输入饭卡初始总额
2. 输入你的初始金额
3. 输入你的充值金额
4. 输入打饭后总余额
5. 点击"开始计算"

### 快速计算（有历史数据后）
1. 输入充值金额（如果有）
2. 输入打饭后总余额
3. 点击"快速计算"

系统会自动记住上次的数据并计算你的剩余余额。

## 计算示例

**场景**：
- 饭卡初始总额：14元（你：7元，别人：7元）
- 你充值：10元
- 打饭后余额：11.28元

**结果**：
- 别人的金额：7.00元（不变）
- 你剩余的金额：4.28元
- 你消费的金额：12.72元

## 技术栈

- **后端**：FastAPI + SQLAlchemy + SQLite
- **前端**：HTML5 + Bootstrap 5 + JavaScript
- **数据库**：SQLite（本地文件存储）

## 项目结构

```
CardSplit/
├── main.py              # FastAPI主程序
├── requirements.txt     # Python依赖
├── start.bat           # 启动脚本
├── money_calculator.db # SQLite数据库（自动生成）
├── static/
│   └── index.html      # 前端页面
├── README.md
└── .gitignore
```

## 数据存储

所有数据保存在本地SQLite数据库文件（`money_calculator.db`）中，包括：
- **calculation_history**：所有计算记录
- **saved_settings**：用户设置（如果有）

## 更新日志

### v1.0.0
- 基础计算功能
- 快速计算功能
- 移动端适配
- 数据持久化
- 历史记录功能